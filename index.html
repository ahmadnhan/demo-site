<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุฏููู ุณุงูุช โ ูุดุงุฑูุน ูุฑูุงุจุท</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Load nicer Arabic fonts: Amiri (serif) for the brand title, Cairo (clean Arabic sans) for body -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="hero">
    <div class="container" style="position:relative">
      <div class="brand">
        <h1>ุฏููู ุณุงูุช</h1>
        <p class="tag" data-i18n="tagline">ูุญูุธุฉ ูุฑูุงุจุท ุฎุงุตุฉ โ ุนุฑุถ ุณุฑูุน ููุดุฑูุนุงุชู ูุฑูุงุจุทู ุงููููุฉ</p>
      </div>
      <!-- header controls: dark mode + language -->
      <div class="header-controls">
        <label class="hdr-switch" aria-label="ุงููุถุน ุงููููู"><input type="checkbox" id="darkToggle" /><span class="icon" aria-hidden="true">๐</span></label>
        <select id="langSelect" aria-label="language">
          <option value="ar">ุงูุนุฑุจูุฉ</option>
          <option value="en">English</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="projects" class="section">
      <h2 data-i18n="projects_h2" style="text-align:center">ุงููุดุงุฑูุน</h2>
      <div class="grid">
        <article class="card">
          <div class="card-head" data-i18n="project1_title">ุฑูุงุจุท ูููุนู</div>
          <p class="muted" data-i18n="project1_desc">ููุงูุน ุงูุชุฌุฑูุจูู ุฎุงุตู ุจู</p>
          <div class="actions">
            <a class="muted" href="https://ahmadnhan.github.io/mysite/" target="_blank" rel="noopener" data-i18n="converter_site_link">ูููุน ุชุญููู ุงูุชุงุฑูุฎ</a>
          </div>
        </article>
        <article class="card">
          <div class="card-head" data-i18n="project2_title">ุชุทุจููุงุชู</div>
          <p class="muted">ุฑูุงุจุท ุชุญููู ุชุทุจููุงุช</p>
          <div class="actions">
            <a class="muted" href="https://www.mediafire.com/file/fekgcz3s4tl8326/app3719549-ghn059.apk/file" target="_blank" rel="noopener" data-i18n="app_converter_title">ุชุทุจูู ุชุญููู ุชุงุฑูุฎ</a>
          </div>
        </article>
  <!-- ูููุน ุดุฎุตู removed as requested -->
      </div>
    </section>

  <!-- links section removed per request -->

      <!-- New: file sharing card (ุธูุฑ ูุจู ุชูุงุตู) -->
      <section id="share" class="section">
        <h2 style="text-align:center">ูุดุงุฑูุฉ ูููุงุช ุนุจุฑ ุงููููุน</h2>
        <div class="card">
          <div class="card-head">ูุดุงุฑูุฉ ูููุงุช ุนุจุฑ ุงููููุน</div>
          <p class="muted">ููููู ุงุฎุชูุงุฑ ููู ููุดุงุฑูุชู ุนุจุฑ ุฑุงุจุท (ุชุฌุฑูุจู). ูุฐู ุงููุงุฌูุฉ ุชูุถูุญูุฉ ููุท ููุง ุชุฑูุน ุงูููู ูุนูููุง ูู ูุฐุง ุงูุฅุตุฏุงุฑ.</p>
          <div class="actions">
            <label class="btn" style="cursor:pointer">
              <input type="file" id="fileInput" style="display:none" accept="*/*" multiple />
              ุฑูุน ููู
            </label>
            <input id="urlInput" type="url" placeholder="ุงูุตู ุฑุงุจุท (ุตูุฑุฉ/ููุฏูู/ููุฏูุง) ูุฃุถู" style="margin-inline-start:8px;padding:6px;border-radius:6px;border:1px solid var(--muted,#ccc)" />
            <button id="addUrlBtn" class="btn" style="margin-inline-start:6px">ุฃุถู ุฑุงุจุท</button>
            
            <div id="uploadHint" class="muted" style="display:block;margin-top:8px">ูู ูุชู ุงุฎุชูุงุฑ ูููุงุช ุฃู ุฑูุงุจุท</div>
          </div>
          <div id="sharePreview" class="share-preview" style="margin-top:10px"></div>
        </div>
      </section>

    <section id="contact" class="section">
      <h2 data-i18n="contact_h2">ุชูุงุตู</h2>
      <div class="contact">
        <p class="muted" data-i18n="contact_text">ููููู ูุถุน ุฅูููู ุฃู ูููุฐุฌ ุชูุงุตู ููุง.</p>
        <div class="contact-info">
          <a class="email green-btn" href="mailto:ahmad14088@gmail.com" aria-label="ahmad14088@gmail.com" title="ahmad14088@gmail.com">
            <span class="mail-icon" aria-hidden="true">โ๏ธ</span>
          </a>
        </div>
  <!-- contact actions removed per request -->
      </div>
    </section>

    <footer class="site-footer">
  <div>ยฉ <span id="year"></span> <span class="site-name" data-i18n="site_name">ุฏููู ุณุงูุช</span> โ <span data-i18n="rights">ุฌููุน ุงูุญููู ูุญููุธุฉ</span></div>
    </footer>
  </main>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  // copy email listener removed (button removed)

    // Dark mode toggle + persistence
    const darkToggle = document.getElementById('darkToggle');
    function setDark(on){
      if(on) document.documentElement.classList.add('dark');
      else document.documentElement.classList.remove('dark');
      try{ localStorage.setItem('demo_dark', on ? '1' : '0') }catch(e){}
      darkToggle.checked = !!on;
    }
    darkToggle.addEventListener('change', (e)=> setDark(e.target.checked));
    // restore theme from storage
    try{ if(localStorage.getItem('demo_dark') === '1') setDark(true) }catch(e){}

    // Simple i18n
    const i18n = {
      en: {
        tagline: 'Portfolio & links โ quick view of my projects',
  projects_h2: 'Projects',
  project1_title: 'My site links',
  project1_desc: 'My demo sites',
  project2_title: 'My apps',
  project2_desc: 'Hijri/Gregorian date converter (downloadable).',
  app_converter_title: 'Date converter app',
        project3_title: 'Personal Site',
        project3_desc: 'Clean personal template for portfolio & resume.',
        tag_tool: 'Tool',
        tag_design: 'Design',
        tag_portfolio: 'Portfolio',
        btn_view: 'View',
        btn_repo: 'Repository',
  btn_download: 'Download',
  btn_download_site: 'View site',
  converter_site_link: 'Date converter site',
        links_h2: 'Quick Links',
        github_link: 'My GitHub',
        repos_link: 'My Repos',
        blog_link: 'My Blog',
        contact_h2: 'Contact',
        contact_text: 'Place an email or contact form here.',
        btn_copy_email: 'Copy email',
        btn_linkedin: 'Open LinkedIn',
        site_name: 'Demo Site',
        rights: 'All rights reserved'
      },
      ar: {
        tagline: 'ูุญูุธุฉ ูุฑูุงุจุท ุฎุงุตุฉ โ ุนุฑุถ ุณุฑูุน ููุดุฑูุนุงุชู ูุฑูุงุจุทู ุงููููุฉ',
  projects_h2: 'ุงููุดุงุฑูุน',
  project1_title: 'ุฑูุงุจุท ูููุนู',
  project1_desc: 'ููุงูุน ุงูุชุฌุฑูุจูู ุฎุงุตู ุจู',
  project2_title: 'ุชุทุจููุงุชู',
  project2_desc: 'ูุญูู ุชูุงุฑูุฎ ูุฌุฑู/ูููุงุฏู (ูุงุจู ููุชุญููู).',
  app_converter_title: 'ุชุทุจูู ุชุญููู ุชุงุฑูุฎ',
        project3_title: 'ูููุน ุดุฎุตู',
        project3_desc: 'ูุงูุจ ุดุฎุตู ุฃููู ูููุนุฑูุถุงุช ูุงูุณูุฑุฉ ุงูุฐุงุชูุฉ.',
        tag_tool: 'ุฃุฏุงุฉ',
        tag_design: 'ุชุตููู',
        tag_portfolio: 'ูุญูุธุฉ',
        btn_view: 'ุนุฑุถ',
        btn_repo: 'ูุณุชูุฏุน',
  btn_download: 'ุชุญููู',
  btn_download_site: 'ุนุฑุถ ุงููููุน',
  converter_site_link: 'ูููุน ุชุญููู ุงูุชุงุฑูุฎ',
        links_h2: 'ุฑูุงุจุทู ุงูุณุฑูุนุฉ',
        github_link: 'ุตูุญุชู ุนูู GitHub',
        repos_link: 'ูุณุชูุฏุนุงุชู',
        blog_link: 'ูุฏููุชู',
        contact_h2: 'ุชูุงุตู',
        contact_text: 'ููููู ูุถุน ุฅูููู ุฃู ูููุฐุฌ ุชูุงุตู ููุง.',
        btn_copy_email: 'ูุณุฎ ุงูุฅูููู',
        btn_linkedin: 'ูุชุญ LinkedIn',
        site_name: 'ุฏููู ุณุงูุช',
        rights: 'ุฌููุน ุงูุญููู ูุญููุธุฉ'
      }
    };
    const langSelect = document.getElementById('langSelect');
    function applyLang(lang){
      document.documentElement.lang = lang;
      // set direction
      document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
      // translate elements with data-i18n
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(i18n[lang] && i18n[lang][key]) el.textContent = i18n[lang][key];
      });
      // translate buttons that have data-i18n
      document.querySelectorAll('.btn').forEach(b=>{
        const key = b.getAttribute('data-i18n');
        if(key && i18n[lang] && i18n[lang][key]) b.textContent = i18n[lang][key];
      });
      try{ localStorage.setItem('demo_lang', lang) }catch(e){}
    }
    langSelect.addEventListener('change', ()=>applyLang(langSelect.value));
    // restore language from storage or apply select value
    try{
      const saved = localStorage.getItem('demo_lang');
      if(saved){ langSelect.value = saved }
    }catch(e){}
    applyLang(langSelect.value);

    // Reveal animations using IntersectionObserver
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(ent=>{
        if(ent.isIntersecting) ent.target.classList.add('in-view');
      });
    },{threshold:0.12});
    document.querySelectorAll('.card, .section').forEach(el=>{ el.classList.add('reveal'); io.observe(el) });
  </script>
  
  <script>
    // Advanced client-side preview for multiple files + links with local persistence
    const fileInput = document.getElementById('fileInput');
    const uploadHint = document.getElementById('uploadHint');
    const sharePreview = document.getElementById('sharePreview');
    const urlInput = document.getElementById('urlInput');
    const addUrlBtn = document.getElementById('addUrlBtn');

  // (ุฒุฑ ูุณุญ ุงููุญููุธุงุช ุฃูุฒูู โ ูุง ุญุงุฌุฉ ูุฅูุดุงุฆู ููุง)

    const STORAGE_KEY = 'demo_share_items_v1';
    const MAX_PERSIST_BYTES = 2 * 1024 * 1024; // 2MB per file
    let items = []; // persisted items

    function saveState(){
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(items)); }
      catch(e){ console.warn('save failed', e); }
    }

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return;
        items = JSON.parse(raw) || [];
        items.forEach(it=> renderItem(it));
        if(items.length) uploadHint.textContent = `ุชุญููู ${items.length} ุนูุตุฑ ูุญููุธ`;
      }catch(e){ console.warn('load failed', e); }
    }

    function makeId(){ return Date.now().toString(36) + '-' + Math.random().toString(36).slice(2,8); }

    function renderItem(it){
      // reuse addPreview-like DOM but don't repersist
      const wrapper = document.createElement('div');
      wrapper.className = 'preview-item';
      wrapper.dataset.id = it.id;
      wrapper.style.padding = '8px';
      wrapper.style.border = '1px solid rgba(0,0,0,0.06)';
      wrapper.style.borderRadius = '8px';
      wrapper.style.marginBottom = '8px';
      wrapper.style.display = 'flex';
      wrapper.style.alignItems = 'center';
      wrapper.style.gap = '10px';

      const info = document.createElement('div');
      info.style.flex = '1';
      const title = document.createElement('div');
      title.textContent = it.name || it.url;
      title.style.fontWeight = '600';
      info.appendChild(title);

      const url = it.dataUrl || it.url;

      if(it.type && it.type.startsWith('image/') && url){
        const img = document.createElement('img');
        img.src = url;
        img.alt = it.name || '';
        img.style.maxWidth = '120px';
        img.style.borderRadius = '6px';
        img.style.objectFit = 'cover';
        img.style.cursor = 'pointer';
        img.addEventListener('click', ()=> window.open(url, '_blank', 'noopener'));
        wrapper.appendChild(img);
      } else if(it.type && it.type.startsWith('video/') && url){
        const vid = document.createElement('video');
        vid.src = url;
        vid.controls = true;
        vid.style.maxWidth = '160px';
        vid.style.borderRadius = '6px';
        vid.style.cursor = 'pointer';
        vid.addEventListener('click', ()=> window.open(url, '_blank', 'noopener'));
        wrapper.appendChild(vid);
      } else {
        const fileIcon = document.createElement('div');
        fileIcon.textContent = '๐';
        fileIcon.style.fontSize = '40px';
        fileIcon.style.lineHeight = '1';
        fileIcon.style.marginInlineEnd = '8px';
        fileIcon.style.cursor = 'pointer';
        if(url) fileIcon.addEventListener('click', ()=> window.open(url, '_blank', 'noopener'));
        wrapper.appendChild(fileIcon);
      }

      const actions = document.createElement('div');
      actions.style.display = 'flex';
      actions.style.flexDirection = 'column';
      actions.style.gap = '6px';

      const saveBtn = document.createElement('button');
      saveBtn.textContent = 'ุญูุธ';
      saveBtn.className = 'btn';
      // download helper: supports data: and object URLs; tries fetch for external URLs
      async function downloadUrl(urlToFetch, filename){
        try{
          if(urlToFetch.startsWith('data:') || urlToFetch.startsWith('blob:')){
            const a = document.createElement('a');
            a.href = urlToFetch;
            a.download = filename || 'file';
            document.body.appendChild(a);
            a.click();
            a.remove();
            return true;
          }
          // try fetching as blob
          const resp = await fetch(urlToFetch, {mode: 'cors'});
          if(!resp.ok) throw new Error('fetch failed');
          const blob = await resp.blob();
          const obj = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = obj;
          a.download = filename || (urlToFetch.split('/').pop().split('?')[0] || 'file');
          document.body.appendChild(a);
          a.click();
          a.remove();
          URL.revokeObjectURL(obj);
          return true;
        }catch(e){
          return false;
        }
      }

      saveBtn.addEventListener('click', async ()=>{
        if(!url){ uploadHint.textContent = 'ูุง ููุฌุฏ ุฑุงุจุท ููุญูุธ'; return }
        uploadHint.textContent = 'ุฌุงุฑู ุงูุชุญุถูุฑ ููุญูุธ...';
        const ok = await downloadUrl(url, (it && it.name) || 'file');
        if(ok) uploadHint.textContent = 'ุชู ุชูุฒูู ุงูููู';
        else { uploadHint.textContent = 'ุชุนุฐุฑ ุงูุชูุฒูู ุชููุงุฆููุง โ ุณููุชุญ ูู ุชุจููุจ ุฌุฏูุฏ'; window.open(url, '_blank', 'noopener'); }
      });
      actions.appendChild(saveBtn);

      const removeBtn = document.createElement('button');
      removeBtn.textContent = 'ุฅุฒุงูุฉ';
      removeBtn.className = 'btn';
      removeBtn.addEventListener('click', ()=>{
        wrapper.remove();
        // also remove from persisted items if exists
        items = items.filter(x=> x.id !== it.id);
        saveState();
      });
      actions.appendChild(removeBtn);

      wrapper.appendChild(info);
      wrapper.appendChild(actions);
      sharePreview.appendChild(wrapper);
    }

    function addAndPersistItem(obj){
      // obj: {kind:'file'|'link', name, url, type, dataUrl?}
      const it = Object.assign({id: makeId()}, obj);
      items.push(it);
      saveState();
      renderItem(it);
    }

    function handleFiles(files){
      if(!files || files.length === 0){ uploadHint.textContent = 'ูู ูุชู ุงุฎุชูุงุฑ ูููุงุช'; return }
      uploadHint.textContent = `ุชู ุงุฎุชูุงุฑ ${files.length} ููู`;
      Array.from(files).forEach(f=>{
        if(f.size <= MAX_PERSIST_BYTES){
          // read as dataURL and persist
          const reader = new FileReader();
          reader.onload = (ev)=>{
            const dataUrl = ev.target.result;
            addAndPersistItem({kind:'file', name: f.name, url: dataUrl, dataUrl, type: f.type || 'application/octet-stream'});
          };
          reader.readAsDataURL(f);
        } else {
          // too large to persist, create transient preview using objectURL
          const url = URL.createObjectURL(f);
          renderItem({id: makeId(), kind:'file', name: f.name, url, type: f.type});
          uploadHint.textContent = 'ูููุงุช ูุจูุฑุฉ ูู ุชูุญูุธ ูุญูููุงุ ููุท ูุนุงููุฉ ูุคูุชุฉ';
        }
      });
    }

    fileInput && fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));

    addUrlBtn && addUrlBtn.addEventListener('click', ()=>{
      const v = (urlInput && urlInput.value || '').trim();
      if(!v) return;
      const ext = v.split('.').pop().toLowerCase().split(/[#?]/)[0];
      let type = '';
      if(['png','jpg','jpeg','webp','gif','svg'].includes(ext)) type = 'image/' + (ext==='jpg'?'jpeg':ext);
      if(['mp4','webm','ogg'].includes(ext)) type = 'video/' + ext;
      addAndPersistItem({kind:'link', name: v.split('/').pop() || v, url: v, type});
      uploadHint.textContent = 'ุชูุช ุฅุถุงูุฉ ุฑุงุจุท ูุญููุธ (ุชุฌุฑูุจู)';
      urlInput.value = '';
    });

  // ูุณุญ ุงููุญููุธุงุช ููุฏุงุฑ ุงูุขู ูุฏูููุง ุฅู ูุฒูุ ุฒุฑ ุงูุฅุฒุงูุฉ ุฃูุฒูู ูู ุงููุงุฌูุฉ

  // labels contain the file input; default label behavior opens the picker โ no manual click needed

    // load persisted items on start
    loadState();
  </script>
 
</body>
</html>
